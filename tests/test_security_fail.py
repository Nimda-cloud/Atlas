#!/usr/bin/env python3
"""
–¢–µ—Å—Ç –±–µ–∑–ø–µ–∫–∏ Atlas –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏

–ü–µ—Ä–µ–≤—ñ—Ä—è—î, —â–æ Atlas –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤.
"""

import os
import sys

#–î–æ–¥–∞—î–º–æ —à–ª—è—Ö –¥–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

def test_with_damaged_protocols():
    """–¢–µ—Å—Ç—É—î–º–æ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏"""
    try:
        from agents.encrypted_creator_protocols import EncryptedCreatorProtocols

        print("–¢–µ—Å—Ç 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏...")

        #–°—Ç–≤–æ—Ä—é—î–º–æ –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∫–ª–∞—Å –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏
        class DamagedProtocols(EncryptedCreatorProtocols):
            def _initialize_encrypted_protocols(self):
                #–ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø—É—Å—Ç—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏
                return {}

        damaged_protocols = DamagedProtocols()
        print("‚úÖ –ï–∫–∑–µ–º–ø–ª—è—Ä —Å—Ç–≤–æ—Ä–µ–Ω–æ")

        print("–¢–µ—Å—Ç 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤...")
        integrity_ok = damaged_protocols.verify_protocols_integrity()
        if not integrity_ok:
            print("‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏—è–≤–ª–µ–Ω–æ –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏")
        else:
            print("‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏—è–≤–∏—Ç–∏ –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏")

        return not integrity_ok  #–ü–æ–≤–µ—Ä—Ç–∞—î–º–æ True, —è–∫—â–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏—è–≤–ª–µ–Ω—ñ —è–∫ –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ

    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ: {e}")
        return False

def test_main_security_fail():
    """–¢–µ—Å—Ç—É—î–º–æ —â–æ main.py –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏"""
    try:
        print("–¢–µ—Å—Ç 3: –°–∏–º—É–ª—è—Ü—ñ—è –∑–∞–ø—É—Å–∫—É Atlas –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏...")

        #–Ü–º—ñ—Ç—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑ main.py
        from agents.encrypted_creator_protocols import EncryptedCreatorProtocols

        class DamagedProtocols(EncryptedCreatorProtocols):
            def _initialize_encrypted_protocols(self):
                return {}

        protocols = DamagedProtocols()
        result = protocols.verify_protocols_integrity()

        if not result:
            print("‚úÖ Atlas –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–º–æ–≤–∏–≤—Å—è –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è")
            print("‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: '–ù–µ —à—É–∫–∞–π—Ç–µ –ë–æ–≥–∞ –Ω–∞ –Ω–µ–±—ñ, —à—É–∫–∞–π—Ç–µ –≤ —Å–µ—Ä—Ü—ñ —Å–≤–æ—î–º—É, –≤ —Å–æ–±—ñ !'")
        else:
            print("‚ùå Atlas –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–∑–≤–æ–ª–∏–≤ –∑–∞–ø—É—Å–∫ –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏")

        return not result

    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ –≤—ñ–¥–º–æ–≤–∏ –∑–∞–ø—É—Å–∫—É: {e}")
        return False

if __name__ == "__main__":
    print("=== –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ ===")
    print()

    #–¢–µ—Å—Ç—É—î–º–æ –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏
    damaged_test_ok = test_with_damaged_protocols()
    print()

    #–¢–µ—Å—Ç—É—î–º–æ –≤—ñ–¥–º–æ–≤—É –∑–∞–ø—É—Å–∫—É
    main_fail_ok = test_main_security_fail()
    print()

    if damaged_test_ok and main_fail_ok:
        print("üéâ –í—Å—ñ —Ç–µ—Å—Ç–∏ –±–µ–∑–ø–µ–∫–∏ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!")
        print("üîí Atlas –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞—Ö–∏—â–µ–Ω–∏–π –≤—ñ–¥ –∑–∞–ø—É—Å–∫—É –±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤")
        print("‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ")
    else:
        print("‚ö†Ô∏è –Ñ –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Ç–µ—Å—Ç–∞–º–∏ –±–µ–∑–ø–µ–∫–∏")

    print("=== –ö—ñ–Ω–µ—Ü—å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ ===")
