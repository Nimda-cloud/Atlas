# Email Strategy System

## üéØ **–û–≥–ª—è–¥**

Email Strategy System –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–±–∏—Ä–∞—î –Ω–∞–π–∫—Ä–∞—â–∏–π —Å–ø–æ—Å—ñ–± –¥–æ—Å—Ç—É–ø—É –¥–æ email –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ç–∞ —Ç–∏–ø—É –∑–∞–≤–¥–∞–Ω–Ω—è.

## üèóÔ∏è **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**

### **1. Gmail API (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1)**
- **–ü–µ—Ä–µ–≤–∞–≥–∏**: –®–≤–∏–¥–∫–æ, –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –±–µ–∑ UI
- **–í–∏–º–æ–≥–∏**: –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è Google API
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ü–æ—à—É–∫, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ email

### **2. Browser Automation (Fallback)**
- **–ü–µ—Ä–µ–≤–∞–≥–∏**: –ü—Ä–∞—Ü—é—î –±–µ–∑ API, —ñ–º—ñ—Ç—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–í–∏–º–æ–≥–∏**: –ë—Ä–∞—É–∑–µ—Ä (Safari/Chrome)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: UI –≤–∑–∞—î–º–æ–¥—ñ—è, –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è

### **3. Hybrid Approach**
- **–õ–æ–≥—ñ–∫–∞**: API —Å–ø–æ—á–∞—Ç–∫—É, –±—Ä–∞—É–∑–µ—Ä —è–∫ fallback
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –°–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ —Ä–µ–∑–µ—Ä–≤–Ω–∏–º –ø–ª–∞–Ω–æ–º

## üîß **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î**

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –º–µ—Ç–æ–¥—É:**

```python
# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–±–∏—Ä–∞—î:
"Search for security emails" ‚Üí Gmail API (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–∏–π)
"Open Safari browser" ‚Üí Browser Automation
"Find emails about security" ‚Üí Hybrid (API + fallback)
```

### **–õ–æ–≥—ñ–∫–∞ –≤–∏–±–æ—Ä—É:**

1. **Gmail API** - –¥–ª—è –ø–æ—à—É–∫—É, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
2. **Browser Automation** - –¥–ª—è UI –≤–∑–∞—î–º–æ–¥—ñ—ó
3. **Hybrid** - –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å –∑ fallback

## üìã **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**

### **Gmail API Setup:**

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å credentials —Ñ–∞–π–ª:**
```bash
# ~/.atlas/gmail_credentials.json
{
  "type": "service_account",
  "project_id": "your-project",
  "private_key_id": "...",
  "private_key": "...",
  "client_email": "...",
  "client_id": "..."
}
```

2. **–ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ environment variables:**
```bash
export GMAIL_API_KEY="your-api-key"
export GOOGLE_APPLICATION_CREDENTIALS="path/to/credentials.json"
```

### **Browser Automation Setup:**

1. **Safari** (macOS) - –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
2. **Chrome** - –ø–æ—Ç—Ä–µ–±—É—î ChromeDriver
3. **Firefox** - –ø–æ—Ç—Ä–µ–±—É—î GeckoDriver

## üéØ **–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**

### **–ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è Gmail API:**
```
"–ó–Ω–∞–π–¥–∏ –≤—Å—ñ security emails"
"–ü–æ—à—É–∫ –ª–∏—Å—Ç—ñ–≤ –ø—Ä–æ –±–µ–∑–ø–µ–∫—É –∞–∫–∞—É–Ω—Ç–∞"
"–§—ñ–ª—å—Ç—Ä—É–π email –∑–∞ –¥–∞—Ç–æ—é"
```

### **–ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è Browser:**
```
"–í—ñ–¥–∫—Ä–∏–π Safari —ñ –∑–∞–π–¥–∏ –≤ Gmail"
"–ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ Gmail"
"–ö–ª—ñ–∫–Ω–∏ –Ω–∞ –ª–∏—Å—Ç"
```

### **–°–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è (Hybrid):**
```
"–ó–Ω–∞–π–¥–∏ security emails, —è–∫—â–æ –Ω–µ –≤–∏–π–¥–µ - –≤—ñ–¥–∫—Ä–∏–π –±—Ä–∞—É–∑–µ—Ä"
"–ü–æ—à—É–∫ –≤ Gmail –∑ fallback –Ω–∞ –±—Ä–∞—É–∑–µ—Ä"
```

## üîç **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**

### **–õ–æ–≥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å:**
```
INFO: Email Strategy Manager selected gmail_api -> EmailFilter
INFO: Email Strategy Manager selected browser_automation -> BrowserTool
INFO: Gmail API failed, falling back to browser automation
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –º—ñ—Å—Ç—è—Ç—å:**
```json
{
  "success": true,
  "method": "gmail_api",
  "message": "Found 5 security emails",
  "data": {...}
}
```

## üöÄ **–ü–µ—Ä–µ–≤–∞–≥–∏ —Å–∏—Å—Ç–µ–º–∏**

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä**
- –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –≤–∏–±–∏—Ä–∞—î –Ω–∞–π–∫—Ä–∞—â–∏–π –º–µ—Ç–æ–¥
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –¥—É–º–∞—î –ø—Ä–æ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### **2. Fallback –º–µ—Ö–∞–Ω—ñ–∑–º**
- –Ø–∫—â–æ API –Ω–µ –ø—Ä–∞—Ü—é—î ‚Üí –±—Ä–∞—É–∑–µ—Ä
- –Ø–∫—â–æ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—Ä–∞—Ü—é—î ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É

### **3. –ì–Ω—É—á–∫—ñ—Å—Ç—å**
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –∑–∞–≤–¥–∞–Ω—å
- –õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –º–µ—Ç–æ–¥–∏

### **4. –ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ñ —Å–ø–æ—Å–æ–±–∏ –¥–æ—Å—Ç—É–ø—É
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –Ω–∞ –∫–æ–∂–Ω–æ–º—É —Ä—ñ–≤–Ω—ñ

## üîß **–¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**

### **–ö–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**

1. **EmailStrategyManager** - –≥–æ–ª–æ–≤–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä
2. **ToolRegistry** - —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
3. **HierarchicalPlanManager** - –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å

### **–ü–æ—Ç—ñ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:**

```
User Request ‚Üí Tool Registry ‚Üí Email Strategy Manager ‚Üí 
Method Selection ‚Üí Tool Execution ‚Üí Result
```

## üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**

### **–ú–µ—Ç—Ä–∏–∫–∏:**
- –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –∫–æ–∂–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É
- –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- –ß–∞—Å—Ç–æ—Ç–∞ fallback –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º–∏

## üéØ **–ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è**

1. **–î–æ–¥–∞—Ç–∫–æ–≤—ñ API** - Outlook, Yahoo
2. **–†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ email
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** - OAuth flow
4. **–ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤** - —à–≤–∏–¥—à–∏–π –¥–æ—Å—Ç—É–ø
5. **Batch –æ–±—Ä–æ–±–∫–∞** - –º–∞—Å–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó

---

**Email Strategy System** –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞–¥—ñ–π–Ω–∏–π —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ email –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ API –∞–±–æ –±—Ä–∞—É–∑–µ—Ä–∞. 