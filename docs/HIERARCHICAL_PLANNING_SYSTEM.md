# Hierarchical Planning System

## –û–≥–ª—è–¥

–°–∏—Å—Ç–µ–º–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ–≥–æ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è Atlas —Ä–µ–∞–ª—ñ–∑—É—î —Ç—Ä–∏—Ä—ñ–≤–Ω–µ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑–±–∏–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ —Ü—ñ–ª—ñ –Ω–∞ —É–ø—Ä–∞–≤–ª—è–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏.

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –¢—Ä–∏ —Ä—ñ–≤–Ω—ñ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è:

1. **–°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å (Phases)** üéØ
   - –í–∏—Å–æ–∫–æ—Ä—ñ–≤–Ω–µ–≤—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω—ñ —Ü—ñ–ª—ñ
   - –†–æ–∑–±–∏–≤–∞—î –æ—Å–Ω–æ–≤–Ω—É –º–µ—Ç—É –Ω–∞ 3-5 –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ–∞–∑
   - –ü—Ä–∏–∫–ª–∞–¥: "–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è", "–ê–Ω–∞–ª—ñ–∑", "–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è", "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è"

2. **–¢–∞–∫—Ç–∏—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å (Tasks)** üìù
   - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ—ó —Ñ–∞–∑–∏
   - –†–æ–∑–±–∏–≤–∞—î —Ñ–∞–∑–∏ –Ω–∞ –≤–∏–∫–æ–Ω—É–≤–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
   - –ü—Ä–∏–∫–ª–∞–¥: "–ó—ñ–±—Ä–∞—Ç–∏ –¥–∞–Ω—ñ", "–ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏", "–ù–∞–ø–∏—Å–∞—Ç–∏ –∑–≤—ñ—Ç"

3. **–û–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏–π —Ä—ñ–≤–µ–Ω—å (Subtasks)** ‚öôÔ∏è
   - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –¥—ñ—ó –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
   - –í–∏–∫–æ–Ω—É–≤–∞–Ω—ñ –∫—Ä–æ–∫–∏ –∑ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
   - –ü—Ä–∏–∫–ª–∞–¥: "–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ search_web", "–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ analyze_data"

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

### HierarchicalPlanManager
–û—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–º –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è–º.

**–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:**
- `create_hierarchical_plan(goal, context)` - —Å—Ç–≤–æ—Ä—é—î –ø–æ–≤–Ω–∏–π –ø–ª–∞–Ω
- `update_task_status(task_id, status, progress)` - –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—è
- `assign_tools_to_task(task_id, tools)` - –ø—Ä–∏–∑–Ω–∞—á–∞—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- `validate_goal_completion(goal)` - –≤–∞–ª—ñ–¥—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ü—ñ–ª—ñ

### HierarchicalTaskView
UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏.

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –î–µ—Ä–µ–≤–æ–≤–∏–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–¥–∞–Ω—å
- –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞—Ç—É—Å—É —Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—É
- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è (–ø–∞—É–∑–∞, –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è, —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è)
- –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∑–∞–≤–¥–∞–Ω–Ω—è

## –°—Ç–∞—Ç—É—Å–∏ –∑–∞–≤–¥–∞–Ω—å

- **PENDING** - –æ—á—ñ–∫—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- **RUNNING** - –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
- **COMPLETED** - –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ
- **FAILED** - –∑–∞–≤–µ—Ä—à–µ–Ω–æ –∑ –ø–æ–º–∏–ª–∫–æ—é
- **PAUSED** - –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–æ
- **CANCELLED** - —Å–∫–∞—Å–æ–≤–∞–Ω–æ

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Atlas

### –í —á–∞—Ç—ñ
–°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –ø—Ä–æ—Ü–µ—Å –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –≤ —á–∞—Ç—ñ —è–∫ "–¥—É–º–∞–Ω–Ω—è":
```
ü§î –ê–Ω–∞–ª—ñ–∑—É—é –∑–∞–≤–¥–∞–Ω–Ω—è...
üìã –°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∏–π –ø–ª–∞–Ω —Å—Ç–≤–æ—Ä–µ–Ω–æ
üéØ –§–∞–∑–∞ 1: –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è
  üìù –ó–∞–≤–¥–∞–Ω–Ω—è 1.1: –ó—ñ–±—Ä–∞—Ç–∏ –¥–∞–Ω—ñ
    ‚öôÔ∏è –î—ñ—è 1.1.1: search_web
```

### –í —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ
–ù–æ–≤–∞ –≤–∫–ª–∞–¥–∫–∞ "Hierarchical Tasks" –ø–æ–∫–∞–∑—É—î:
- –Ü—î—Ä–∞—Ä—Ö—ñ—á–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–≤–¥–∞–Ω—å
- –°—Ç–∞—Ç—É—Å –∫–æ–∂–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
- –ü—Ä–æ–≥—Ä–µ—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- –ü—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ç–∞ –ø–ª–∞–≥—ñ–Ω–∏
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏

## –ü—Ä–æ—Ü–µ—Å —Ä–æ–±–æ—Ç–∏

1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞–Ω—É**
   - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å —Ü—ñ–ª—å
   - –°–∏—Å—Ç–µ–º–∞ —Å—Ç–≤–æ—Ä—é—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∏–π –ø–ª–∞–Ω
   - –î–ª—è –∫–æ–∂–Ω–æ—ó —Ñ–∞–∑–∏ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —Ç–∞–∫—Ç–∏—á–Ω–∏–π –ø–ª–∞–Ω
   - –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏–π –ø–ª–∞–Ω

2. **–í–∏–∫–æ–Ω–∞–Ω–Ω—è**
   - –ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ
   - –°—Ç–∞—Ç—É—Å –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
   - –ü—Ä–æ–≥—Ä–µ—Å –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –Ω–∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

3. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**
   - –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–≤–¥–∞–Ω—å
   - –í–∏–∑–Ω–∞—á–∞—î —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Ü—ñ–ª—ñ
   - –ù–∞–¥–∞—î –∑–≤—ñ—Ç –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```python
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞–Ω—É
plan = hierarchical_plan_manager.create_hierarchical_plan(
    goal="–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–≤—ñ—Ç –ø—Ä–æ —à—Ç—É—á–Ω–∏–π —ñ–Ω—Ç–µ–ª–µ–∫—Ç",
    context={"format": "pdf", "sources": 10}
)

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∑–∞–≤–¥–∞–Ω–Ω—è
hierarchical_plan_manager.update_task_status(
    task_id="task_123",
    status=TaskStatus.RUNNING,
    progress=0.5
)

# –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
result = hierarchical_plan_manager.validate_goal_completion(goal)
```

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Å–∏—Å—Ç–µ–º–∏

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å** - —á—ñ—Ç–∫–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—è –∑–∞–≤–¥–∞–Ω—å
2. **–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è** - –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º
3. **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–∞—É–∑–∏ —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
4. **–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å** - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –≤ —á–∞—Ç—ñ
5. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

## –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
- [ ] –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å
- [ ] –ú–∞—à–∏–Ω–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–ª–∞–Ω—ñ–≤
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] –†–æ–∑—à–∏—Ä–µ–Ω—ñ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ 